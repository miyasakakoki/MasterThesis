本章では、論文の構成のと、研究の背景及び現状の課題について記述し, 本研究の目的について述べる.
\section{研究の背景}
\subsection{IoTの登場}
近年、IoTが注目を集めている。
IoTとはInternet of Thingsの略で、全ての物がインターネットに接続し、相互に情報を交換しあうことで様々な自動化を実現しようとする概念である。
「モノのインターネット」とも呼ばれる。

以前より、家電など様々な物をインターネットに繋ぎ自動化しようといった考えはあったが、近年の半導体技術の進歩によるコンピューターの小型化・低価格化と、一般へのインターネットの普及により、実現可能な考えとして注目されている。

次はIoTという言葉がまだ一般に言われていなかった時代のIoTサービスの事例である。
\begin{itemize}
\item Trojan Room coffee pot(1993年)\\
	ケンブリッジ大学の学生が、廊下に設置されていたコーヒーメーカーを確認しに行く手間を省いたもので、IoTの源流と言える。
	Webカメラがコーヒーポットを撮影し、HTTPを使用して配信するものであった。
	(\url{https://en.wikipedia.org/wiki/Trojan_Room_coffee_pot})
\item HTCPCP(1998年)\\
	ジョークとして発案されたRFCである。
	コーヒーポットをインターネット越しに自動化するためのプロトコルを定めたもの。
	実際に実装してみたという例が複数ある他、お茶を入れるための拡張プロトコルも定められている。
	(\url{http://www.geocities.jp/toyprog/rfc/rfc7168.txt})
	(\url{https://tools.ietf.org/html/rfc2324})
\item I-Pot(2001年)\\
	象印マホービンが販売をしていたインターネットにつながる給湯器である。「みまもりホットライン」というサービスと連携している。
	ポットを使用すると、サーバーに通知が送られ、サーバー側で1週間の使用回数が閲覧できる他、指定したメールアドレスに対しメールを送る機能もあった。
	(\url{https://seniorguide.jp/article/1001078.html})
\end{itemize}
このように以前からIoTがあったことが分かる。

次は日本におけるインターネット世帯利用率の推移である。
2000年末には、約34％程度であったが、2001年末には、およそ2倍となる約60％の世帯で利用されるようになり、2003年末には約88％の世帯で利用されるようになっていることが分かる。
%インターネット利用率の推移
(\url{http://www2.ttcn.ne.jp/honkawa/6200.html})
次はパーソナルコンピュータの平均価格の推移である。
(\url{https://middle-edge.jp/articles/I0001147})
2000年台では、17万円前後していたコンピューターが2010年には8.8万円と約半分の値段になっている。
また、ノートPCの出荷台数の比率から、価格以外に大きさも小型化していることが分かる。
他に2007年にiPhoneが発売されていることから、2000年台前半に急速に小型化した事が伺える。

これらから、近年のコンピュータの小型化・低価格化とインターネットの普及により、IoTが再び注目されるようになった事が分かる。


IoTについては、2011年のガートナーの調査によれば、５年〜１０年後には、主流の考えとして採用されるであろうと予測されている。
%図ガートナーグラフ
(\url{https://www.gartner.co.jp/press/html/pr20110907-01.html})
また、2015年の情報通信白書では、「IoTによる産業へのインパクト」というタイトルでIoTについて述べられていることから、今後も注目を集めていく事が推測される。
%情報通信白書
(\url{http://www.soumu.go.jp/johotsusintokei/whitepaper/ja/h27/html/nc254100.html})

現在、IoTは注目を集めており、インターネットにつながる小型で安価なコンピュータが数多く登場してきている他、様々なIoTサービスが開発されている。
次は、IoTで頻繁に使用される小型コンピュータの一例である。
\begin{itemize}
\item RaspberryPi\\
	Linux OSが動く3000円前後のコンピューターとして2012年に発売される。
	教育用の小型コンピュータとして開発された経緯があるが、他のハードウェアとの接続を考えたGPIOや、ネットワークへの接続するためのEthernetインターフェースがあることから、IoT開発にて頻繁に使われている。
	また、より小型化を図ったRaspberryPiZeroや、組み込み機器への搭載を考えたComputeModule等、バリエーションが豊富である。
	(\url{https://www.raspberrypi.org/})
\item Intel Edison\\
	当初より、IoTを意識して作られたコンピュータ。2014年に発売された。
	RaspberryPiとは違い、IoT向けに作られているので、ディスプレイポートや、音声の出力ポートは存在しない。
	また、SDカード大のサイズと、とても小型である。
	Wifi,Bluetoothのインターフェースの他、USBインターフェース、GPIOが付いている。
	(\url{http://edison-lab.jp/edison/})
\item WioNode\\
	SeedStudioが開発したIoTデバイス。
	RaspberryPiにつなげて使うIoTデバイス「GrovePi」の各モジュールが、使用できる。
	また、Wifi経由でスマートフォンをつなぎ設定できるのも特徴の一つである。
	Wifi付きのマイコンボードとしても利用できる。
	(\url{https://www.seeedstudio.com/Wio-Node-p-2637.html})
\end{itemize}

次はIoTサービスの一例である。
\begin{itemize}
\item 萌香(コーヒーポットの自動化)
	(\url{http://alpha.mixi.co.jp/entry/2009/10723/})
\item 太陽光発電の発電量の監視
	ある株式会社R社様では、太陽光発電所の発電量を監視し、配信するためにIoTを使用している。
	太陽光発電所では、太陽光パネルで発電した電力をパワーコンディショナに繋ぎ、そこから送電線へ送電している。
	R社様では、そのパワーコンディショナにR社製機器を繋ぎ、インターネットを経由して情報を送るサービスを展開している。
\item 農業の自動化
	
\item パスの運行情報の掲示

\end{itemize}
このように、今後もIoTサービスの開発が活発になる事が予想される。

\subsection{IoTサービスの構造}
IoTサービスの基本構造は次のとおりである。
IoT機器・ネットワーク・サーバーの3層構造となっている。

ネットワークについては、末端のネットワークとインターネットに別れる。
末端のネットワークとは、IoT機器がつながるネットワークのことで、IoT機器が直接インターネットへ接続されている場合は、存在しない。
末端のネットワークには非IP網とIP網の2つが有り、末端のネットワークが非IP網である場合、インターネットはIP網であるため、プロトコル変換を行うゲートウェイを置く必要がある。
またIP網である場合も、インターネットと分離させるといった意味で、間にNAPTを置く。
NAPTとは、ネットワークを分離する仕組みのことで、内側で発生した通信は外へ通すが、外で発生した通信は内側へは通さないという特徴がある。

IoT機器自体に目を向けると、IoT機器には、センサ型機器とアクチュエータ型機器、またそれらを統合したハイブリッド型機器とが有る。
センサ型機器は、周囲の状態を察知し、サーバーへ通知する。
アクチュエータ型機器は、サーバーから通知を受け、周囲に対し何らかの動作を行うものである。
ハイブリッド型は、それら2つの機器をひとまとめにした物である。

サーバからの通知の受け取り方には、2種類あり、サーバーへ定期的にアクセスし、自分宛のメッセージが無いか確認するポーリング型、サーバーから直接通知を受け取るサーバー通知型がある。
それぞれ以下のような利点・欠点がある
\begin{itemize}
	\item ポーリング型\\
		利点としては、インターネットに直接繋がなくても良いため、多くのネットワーク環境にて利用できる事にある。
		欠点としては、不要なアクセスを頻繁にする必要があるため、ネットワークに負荷をかけてしまう。
	\item サーバー通知型\\
		利点としては、不要なアクセスがおこらないことにある。
		欠点としては、常に待ち受けていなくてはならないので、電池持ちが悪い。また、インターネットに直接つながるため、セキュリティ面でも不安を抱える事になる。
		さらに、直接インターネットにつながるネットワークでないと利用出来ないことが致命的である。
		サーバーから通知が来るので、NAPT環境下では採用できない。
\end{itemize}
上記理由により、ポーリング型が多く取り入れられている。

サーバーは、IoT機器からの通知を蓄積・分析し、IoT機器へメッセージを送付、若しくは、ユーザーへ表示したり、ユーザーからの入力を受け付けたりする。


\section{問題}
このように、IoTデバイスの開発が盛んに行われる一方で、IoTサービスの運用において、次のような問題がある。
\begin{itemize}
	\item 数が多くて管理しきれない問題
	\begin{itemize}
		\item 設置前の設定において、どのデバイスをどこに設置すれば良いのかわからなくなる ->　ラベリングにて解決
		\item 設置後、どのデバイスがどこに設置されたのかわからなくなる -> 帳簿をつけることで解決
		\item 設定の際に、個別の設定をしなければならないのが面倒\\
			具体的には、デバイスに振るID等。\\
			ラベリングと整合性が取れていなければならない。
	\end{itemize}
	\item 稼働状況の監視が面倒な問題
	\begin{itemize}
		\item 設置したものが正常に稼働し始めたかどうか確認するのが面倒\\
			設置者が、デバイスの操作を知っている必要が有る。\\
			また、ディスプレイ等をつけないことが多いので、別途確認する手段（ディスプレイとキーボードを持参等）を用意する必要がある。
		\item 設置後、正常に稼働しているのか確認するのが面倒\\
			NAPTの内側に設置されている事が多いので、Pingやsnmpでは確認できない。\\
			また、ネットワークの断絶等があった場合、稼働状況を確認できない。
		\item いつ稼働していていつ稼働していなかったのか管理するのが大変\\
			いつ稼働していていつ稼働していなかったのかがわからないと、データを正確に分析する事が出来ない。
	\end{itemize}
\end{itemize}
稼働状況の監視については、IoTサービスで行うことがある程度可能だが、サービス自体に手を加える必要があるため、開発のコストが高くなる。
その中で、私は、IoTデバイスの状態監視に着目した。

\section{研究の目的}
そこで、IoTサービスとは独立したIoTデバイスの監視サービスを開発することにより、これらの問題を解決できるのではないかと考えた。
本研究では, IoTデバイスの監視サービスを開発することで、IoTデバイスの状態監視を簡単化することを目的とする。


\section{本論文の構成}
本論文では、第一章にて研究の背景及び現状の課題、本研究の目的について述べる。
第二章では、既存の解決策とその課題を分析し、
第三章にて、サービスの開発を提案し、そのための要求の分析を行い、
第四章では、サービスの構成と機能、ユーザーの動きについて述べる。
第五章では、検証として行った実験と考察、
第六章では、成果と今後の課題について述べる。
