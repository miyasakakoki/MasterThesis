そこで、新たにIoT機器の稼動状態を監視することに特化したシステムを開発・提供することで、問題が解決できるのではないかと考えた。
まず、システムの要件を抽出するために、以下のような実験を行った。

%岡本商店街での事例
\section{岡本商店街での事例}
岡本商店街とは、兵庫県東灘区にある阪急岡本駅とJR摂津本山駅の間にある商店街の事である。
目的は、岡本商店街内を往来する人の流れを観測し、商店街の活性化につなげる事であったが、
有用な知見（？）が得られたので、事例として上げることにする。

\subsection{実験概要}
スマートフォンのWifi接続機能をONにした時、スマートフォンから定期的にプローブパケットというものが、送信される。
そのプローブパケットを観測するためのソフトウェアとして、ampsenceがある。
本実験では、そのampsenceとRaspberryPiを用いてプローブパケットを観測し、Webアプリケーションによって可視化することを行った。
RaspberryPiは、岡本商店街内にある商店に設置させてもらい、インターネットとの接続は、商店に敷設済みのWifiネットワークを使用させてもらう他、1台のみSORACOM Airを使用した。
SORACOM Air とは、IoT向けデータ通信を提供するサービスで、携帯電話網を用いている。そのため、RaspberryPiに、SIMモジュールとSIMカードを接続しなければならなかった。

\subsection{課題と考察}
その実験の際、次のような問題があった。
\begin{itemize}
	\item 機器が稼働していないことがあった\\
		コンセントが抜け、機器が稼働していないことがあった。\\
		そのため、分析する段階において、機器からログを回収し、全ての機器が稼働している時間帯を選び、分析する必要があった。\\
		また、そのログのタイムスタンプが、UnixTimeであったため、可読性が低く時間がかかった。
		機器の稼働を監視していなかったので、機器が復旧するまでに必要以上に時間がかかり、分析の際、必要なデータが集まらないため、分析を諦めたものもあった。
	\item 迅速に稼働状態の確認が行えない\\
		RaspberryPiを使用したセンサーであったため、ディスプレイやキーボードはついておらず、現地に行って確認するためにはディスプレイやキーボードを持っていく必要があった。\\
		また、現地に行かなくてはならないのでとても手間であった。\\
		そのため、遠隔からアクセスすることにした。\\
	\item 遠隔からのアクセスができない問題\\
		しかし、遠隔からのプログラムの修正、稼働の監視を行う際、商店のネットワークとSORACOM Airのネットワークにはインターネットとの間にNAPTが入っており、外からアクセス不能だった。\\
		VPNを利用しアクセスするが、稼働の確認毎にVPNサーバーにアクセスしてからの確認となるため、VPNに関する知識が必要だった。\\
		また、簡単に稼働を確認できなかった。
	\item 機器の回収に手間がかかった\\
		機器を回収する際、保存していたデータを破損しないために、正常にシャットダウンさせる必要があった。\\
		そのため、回収作業の際もディスプレイとキーボードを持参し正常にシャットダウンさせてからコンセントを抜く等、手間がかかった。
\end{itemize}
上記より、機器の稼動状態を確認する事はとても重要であることが分かった。

%学内でのwifi人流観測
\section{学内でのwifiを用いた人流観測}
学内にて、wifiを用いた人流観測を行った。
構成としては、先の事例での構成とほぼ同じものを学内でも行った。
先の事例から得た問題点を踏まえて行った。

\subsection{課題と考察}
その際にも次のような問題があった。
\begin{itemize}
	\item 分析の為に、機器の状態を常に監視している必要があった\\
		岡本商店街での実験を踏まえ、機器の状態を定期的に監視し、機器トラブルに備えた。
	\item 機器がネットワークに接続できていない事があった\\
		機器のトラブルにより、機器がネットワークに接続できていない事があった。\\
		機器の様子を見に行った所、電源が入っているのに繋がっていないというトラブルがあった。
\end{itemize}

\section{要件の抽出}
上記の事例・実験から、以下のような機能が必要となることが分かった。

\begin{itemize}
\item IoT機器の稼働状態がわかる\\
	IoT機器の稼動状態は、稼働している・稼働していない・ネットワークに接続されていないの３つ必要である。
	また、一覧で閲覧することが可能である事が望ましい。
\item IoT機器の稼働状態の記録を閲覧することができる\\
	データの分析を行う際に、それら稼働状況の記録が必要になる事が分かった。\\
	また、それらの記録が時刻と共に、整理されている必要があることも分かった。
\item IoT機器の停止・再起動を行うことができる\\
	保存していたデータを破損しないために、IoT機器を正常にシャットダウンさせる必要があり、その手順のためにIoT機器を回収することが手間であることが分かった。
\end{itemize}

そこで、IoTサービスとは独立した、IoT機器の稼動状態を監視・管理することを簡単にするサービスを開発し、提供すれば良いのではないかと考えた。




